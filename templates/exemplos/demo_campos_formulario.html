{% extends "base_publica.html" %}
{% from "macros/form_fields.html" import field %}

{% block titulo %}Demonstração da Macro de Campos{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <h1 class="mb-4">Demonstração da Macro field()</h1>
            <p class="lead mb-5">
                Exemplos de todos os tipos de campos disponíveis na macro <code>field()</code>.
            </p>

            <form method="POST" action="#">
                <!-- INPUT TEXT -->
                <h3 class="mt-5 mb-3">Campos de Texto</h3>
                {{ field(name='nome', label='Nome Completo', type='text', required=true, autofocus=true,
                attributes={'minlength': 3, 'maxlength': 100}) }}

                {{ field(name='email', label='E-mail', type='email', required=true) }}

                {{ field(name='telefone', label='Telefone', type='tel',
                attributes={'pattern': '[0-9]{2} [0-9]{5}-[0-9]{4}'}) }}

                {{ field(name='site', label='Website', type='url') }}

                <!-- PASSWORD COM BOTÃO ANEXADO -->
                <h3 class="mt-5 mb-3">Senha com Botão Toggle</h3>
                {{ field(name='senha', label='Senha', type='password', required=true,
                append_icon='bi-eye', append_button_onclick="window.App.Modal.showInfo('Exemplo de botão anexado ao campo', 'Botão Clicked')") }}

                <!-- TEXTAREA -->
                <h3 class="mt-5 mb-3">Área de Texto</h3>
                {{ field(name='descricao', label='Descrição', type='textarea', rows=5,
                help_text='Descreva em detalhes o que você precisa.') }}

                <!-- SELECT -->
                <h3 class="mt-5 mb-3">Select (Dropdown)</h3>
                {{ field(name='estado', label='Estado', type='select', required=true,
                options={'': 'Selecione...', 'SP': 'São Paulo', 'RJ': 'Rio de Janeiro', 'MG': 'Minas Gerais', 'RS': 'Rio
                Grande do Sul'}) }}

                <!-- CHECKBOX PADRÃO -->
                <h3 class="mt-5 mb-3">Checkbox</h3>
                {{ field(name='aceita_termos', label='Aceito os termos e condições', type='checkbox', required=true) }}

                {{ field(name='newsletter', label='Desejo receber newsletter', type='checkbox') }}

                <!-- CHECKBOX SWITCH -->
                <h3 class="mt-5 mb-3">Checkbox Switch</h3>
                {{ field(name='notificacoes', label='Receber notificações por e-mail', type='checkbox',
                checkbox_style='switch') }}

                {{ field(name='publico', label='Perfil público', type='checkbox', checkbox_style='switch') }}

                <!-- RADIO PADRÃO -->
                <h3 class="mt-5 mb-3">Radio Buttons (Padrão)</h3>
                {{ field(name='genero', label='Gênero', type='radio', required=true,
                options={'M': 'Masculino', 'F': 'Feminino', 'O': 'Outro', 'N': 'Prefiro não informar'}) }}

                <!-- RADIO HORIZONTAL -->
                <h3 class="mt-5 mb-3">Radio Buttons (Horizontal)</h3>
                {{ field(name='tamanho', label='Tamanho', type='radio', radio_layout='horizontal', required=true,
                options={'P': 'Pequeno', 'M': 'Médio', 'G': 'Grande', 'GG': 'Extra Grande'}) }}

                <!-- RADIO BUTTON GROUP -->
                <h3 class="mt-5 mb-3">Radio Buttons (Button Group)</h3>
                {{ field(name='plano', label='Escolha seu plano', type='radio', radio_style='buttons', required=true,
                options={'basico': 'Básico', 'profissional': 'Profissional', 'empresarial': 'Empresarial'}) }}

                <!-- RADIO BUTTON GROUP COM ÍCONES -->
                <h3 class="mt-5 mb-3">Radio Buttons (Button Group com Ícones)</h3>
                {{ field(name='perfil_usuario', label='Escolha seu perfil', type='radio', radio_style='buttons',
                required=true,
                options={'Autor': 'Comprador', 'LEITOR': 'LEITOR'},
                radio_icons={'Autor': 'bi-cart3', 'LEITOR': 'bi-shop'},
                help_text='Selecione o tipo de conta que deseja criar') }}

                <!-- MÁSCARAS DE DIGITAÇÃO -->
                <h3 class="mt-5 mb-3">Máscaras de Digitação</h3>

                <div class="alert alert-info">
                    <strong><i class="bi bi-info-circle"></i> Máscaras de Digitação</strong>
                    <p class="mb-0 mt-2">As máscaras formatam automaticamente o valor durante a digitação. Padrões:
                        <code>0</code>=número, <code>A</code>=maiúscula, <code>a</code>=minúscula</p>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        {{ field(name='cpf', label='CPF', mask='000.000.000-00',
                        help_text='Apenas números serão aceitos') }}
                    </div>
                    <div class="col-md-6">
                        {{ field(name='cnpj', label='CNPJ', mask='00.000.000/0000-00') }}
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        {{ field(name='telefone_mask', label='Telefone (com máscara)', mask='(00) 00000-0000') }}
                    </div>
                    <div class="col-md-6">
                        {{ field(name='cep', label='CEP', mask='00000-000') }}
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        {{ field(name='data_mask', label='Data', mask='00/00/0000',
                        help_text='Digite no formato DD/MM/AAAA') }}
                    </div>
                    <div class="col-md-6">
                        {{ field(name='hora_mask', label='Hora', mask='00:00') }}
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        {{ field(name='placa_antiga', label='Placa (Antiga)', mask='AAA-0000',
                        help_text='Formato: 3 letras + hífen + 4 números') }}
                    </div>
                    <div class="col-md-6">
                        {{ field(name='placa_mercosul', label='Placa (Mercosul)', mask='AAA-0A00',
                        help_text='Formato: ABC-1D23') }}
                    </div>
                </div>

                {{ field(name='cartao', label='Cartão de Crédito', mask='0000 0000 0000 0000') }}

                <div class="row">
                    <div class="col-md-9">
                        {{ field(name='validade_cartao', label='Validade', mask='00/00',
                        help_text='MM/AA') }}
                    </div>
                    <div class="col-md-3">
                        {{ field(name='cvv', label='CVV', mask='000') }}
                    </div>
                </div>

                <h4 class="mt-4 mb-3">Máscara com Unmask</h4>
                <p class="text-muted">Quando <code>unmask=true</code>, o valor enviado no formulário será sem
                    formatação.</p>

                {{ field(name='cpf_unmask', label='CPF (unmask)', mask='000.000.000-00', unmask=true,
                help_text='Valor enviado: apenas números, sem pontos e hífen') }}

                <h4 class="mt-4 mb-3">Máscara com Eventos JavaScript</h4>

                {{ field(name='cep_busca', label='CEP (com busca de endereço)', mask='00000-000',
                onblur="console.log('Buscar endereço para CEP:', this.value)",
                help_text='Ao sair do campo, simula busca de endereço (veja o console)') }}

                <!-- CAMPOS DE DATA E HORA -->
                <h3 class="mt-5 mb-3">Data e Hora (Nativos do HTML5)</h3>
                <div class="row">
                    <div class="col-md-6">
                        {{ field(name='data_nascimento', label='Data de Nascimento', type='date', required=true) }}
                    </div>
                    <div class="col-md-6">
                        {{ field(name='hora_preferida', label='Horário Preferido', type='time') }}
                    </div>
                </div>

                {{ field(name='data_hora_agendamento', label='Data e Hora do Agendamento', type='datetime-local') }}

                <!-- CAMPOS NUMÉRICOS -->
                <h3 class="mt-5 mb-3">Campos Numéricos</h3>
                <div class="row">
                    <div class="col-md-6">
                        {{ field(name='idade', label='Idade', type='number',
                        attributes={'min': 18, 'max': 120}) }}
                    </div>
                    <div class="col-md-6">
                        {{ field(name='valor', label='Valor (R$)', type='number',
                        attributes={'min': 0, 'step': '0.01'}) }}
                    </div>
                </div>

                <!-- CAMPOS DECIMAIS COM FORMATAÇÃO -->
                <h3 class="mt-5 mb-3">Campos Decimais (com formatação automática)</h3>

                <div class="alert alert-info">
                    <strong><i class="bi bi-info-circle"></i> Campos Decimais</strong>
                    <p class="mb-0 mt-2">
                        Formatam automaticamente valores decimais com separadores de milhar (ponto) e decimais
                        (vírgula),
                        seguindo o padrão brasileiro. Exemplo: 1.234,56
                    </p>
                </div>

                <h4 class="mt-4 mb-3">Exemplos Básicos</h4>

                <div class="row">
                    <div class="col-md-6">
                        {{ field(name='valor_decimal', label='Valor Decimal', type='decimal',
                        help_text='2 casas decimais com separador de milhares') }}
                    </div>
                    <div class="col-md-6">
                        {{ field(name='preco', label='Preço', type='decimal', decimal_prefix='R$ ',
                        help_text='Com prefixo R$') }}
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        {{ field(name='percentual', label='Percentual', type='decimal', decimal_suffix=' %',
                        help_text='Com sufixo %') }}
                    </div>
                    <div class="col-md-6">
                        {{ field(name='peso', label='Peso', type='decimal', decimal_suffix=' kg', decimal_places=3,
                        help_text='3 casas decimais com sufixo kg') }}
                    </div>
                </div>

                <h4 class="mt-4 mb-3">Opções Avançadas</h4>

                <div class="row">
                    <div class="col-md-6">
                        {{ field(name='temperatura', label='Temperatura', type='decimal',
                        decimal_suffix=' °C', allow_negative=true,
                        help_text='Permite valores negativos') }}
                    </div>
                    <div class="col-md-6">
                        {{ field(name='valor_sem_milhar', label='Valor sem Separador', type='decimal',
                        show_thousands=false,
                        help_text='Sem separador de milhares') }}
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        {{ field(name='nota', label='Nota', type='decimal', decimal_places=1,
                        attributes={'max': 10}, help_text='1 casa decimal (ex: 9,5)') }}
                    </div>
                    <div class="col-md-6">
                        {{ field(name='area', label='Área', type='decimal', decimal_suffix=' m²', decimal_places=2,
                        help_text='Área em metros quadrados') }}
                    </div>
                </div>

                {{ field(name='orcamento', label='Orçamento Total', type='decimal', decimal_prefix='R$ ', required=true,
                help_text='Valor obrigatório com prefixo monetário') }}

                <!-- CAMPO COM ERRO (simulação) -->
                <h3 class="mt-5 mb-3">Campo com Erro (Simulação)</h3>
                <div class="mb-3 ">
                    <div class="form-floating">
                        <input type="text" class="form-control is-invalid" id="campo_erro" name="campo_erro"
                            value="valor inválido" placeholder="Campo com Erro">
                        <label for="campo_erro">Campo com Erro</label>
                        <div class="invalid-feedback">
                            Este campo contém um erro de validação.
                        </div>
                    </div>
                </div>

                <!-- HIDDEN -->
                {{ field(name='id', type='hidden', value='123') }}

                <!-- BOTÕES -->
                <div class="d-flex gap-3 mt-5">
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="bi bi-check-circle"></i> Enviar Formulário
                    </button>
                    <button type="reset" class="btn btn-secondary btn-lg">
                        <i class="bi bi-x-circle"></i> Limpar
                    </button>
                </div>
            </form>

            <!-- DOCUMENTAÇÃO -->
            <div class="card mt-5 mb-5">
                <div class="card-body">
                    <h4 class="card-title">Como Usar a Macro</h4>
                    <p>Importe a macro no topo do seu template:</p>
                    <pre
                        class="bg-light p-3 rounded"><code>{% raw %}{% from "macros/form_fields.html" import field %}{% endraw %}</code></pre>

                    <p class="mt-3">Exemplos de uso:</p>
                    <pre class="bg-light p-3 rounded"><code>{% raw %}{{ field(name='email', label='E-mail', type='email', required=true) }}

{{ field(name='senha', label='Senha', type='password',
         append_icon='bi-eye', append_button_onclick="alternarVisibilidadeSenha('senha')") }}

{{ field(name='perfil', label='Perfil', type='select',
         options={'Admin': 'Administrador', 'autor': 'autor'}) }}

{{ field(name='ativo', label='Ativo', type='checkbox', checkbox_style='switch') }}

{{ field(name='tipo', label='Tipo', type='radio', radio_style='buttons',
         options={'1': 'Opção 1', '2': 'Opção 2'}) }}

{# Radio horizontal #}
{{ field(name='tamanho', label='Tamanho', type='radio', radio_layout='horizontal',
         options={'P': 'Pequeno', 'M': 'Médio', 'G': 'Grande'}) }}

{# Radio com ícones #}
{{ field(name='perfil', label='Perfil', type='radio', radio_style='buttons',
         options={'Autor': 'Comprador', 'LEITOR': 'LEITOR'},
         radio_icons={'Autor': 'bi-cart3', 'LEITOR': 'bi-shop'}) }}

{# Máscaras de digitação #}
{{ field(name='cpf', label='CPF', mask='000.000.000-00') }}

{{ field(name='telefone', label='Telefone', mask='(00) 00000-0000', unmask=true) }}

{{ field(name='cep', label='CEP', mask='00000-000',
         onblur='buscarEndereco(this.value)') }}

{# Campos decimais #}
{{ field(name='preco', label='Preço', type='decimal', decimal_prefix='R$ ') }}

{{ field(name='peso', label='Peso', type='decimal', decimal_suffix=' kg', decimal_places=3) }}

{{ field(name='temperatura', label='Temperatura', type='decimal',
         decimal_suffix=' °C', allow_negative=true) }}

{{ field(name='valor_simples', label='Valor', type='decimal', show_thousands=false) }}{% endraw %}</code></pre>

                    <p class="mt-3">A macro busca automaticamente:</p>
                    <ul>
                        <li><strong>Erros:</strong> de <code>erros[name]</code> (se disponível no contexto)</li>
                        <li><strong>Valores:</strong> de <code>dados[name]</code> (se value não for fornecido)</li>
                    </ul>

                    <h5 class="mt-4">Máscaras Disponíveis</h5>
                    <p>Padrões de máscara:</p>
                    <ul>
                        <li><code>0</code> = dígito numérico (0-9)</li>
                        <li><code>A</code> = letra maiúscula (A-Z)</li>
                        <li><code>a</code> = letra minúscula (a-z)</li>
                        <li>Qualquer outro caractere = literal (inserido automaticamente)</li>
                    </ul>

                    <p class="mt-3">Máscaras comuns:</p>
                    <ul>
                        <li>CPF: <code>000.000.000-00</code></li>
                        <li>CNPJ: <code>00.000.000/0000-00</code></li>
                        <li>Telefone: <code>(00) 00000-0000</code></li>
                        <li>Telefone Fixo: <code>(00) 0000-0000</code></li>
                        <li>CEP: <code>00000-000</code></li>
                        <li>Data: <code>00/00/0000</code></li>
                        <li>Hora: <code>00:00</code></li>
                        <li>Placa Antiga: <code>AAA-0000</code></li>
                        <li>Placa Mercosul: <code>AAA-0A00</code></li>
                        <li>Cartão: <code>0000 0000 0000 0000</code></li>
                        <li>CVV: <code>000</code> ou <code>0000</code></li>
                        <li>Validade Cartão: <code>00/00</code></li>
                    </ul>

                    <h5 class="mt-4">Parâmetros da Macro</h5>
                    <p class="mb-2"><strong>Parâmetros básicos:</strong></p>
                    <ul>
                        <li><code>name</code> - Nome do campo (obrigatório)</li>
                        <li><code>label</code> - Texto do label (obrigatório)</li>
                        <li><code>type</code> - Tipo do campo (text, email, password, textarea, select, checkbox, radio,
                            etc.)</li>
                        <li><code>value</code> - Valor inicial (se não fornecido, busca de <code>dados[name]</code>)
                        </li>
                        <li><code>required</code> - Campo obrigatório (padrão: false)</li>
                        <li><code>disabled</code> - Campo desabilitado (padrão: false)</li>
                        <li><code>readonly</code> - Campo somente leitura (padrão: false)</li>
                    </ul>

                    <p class="mb-2 mt-3"><strong>Radio buttons:</strong></p>
                    <ul>
                        <li><code>radio_style</code> - Estilo dos radio: <code>'default'</code> ou
                            <code>'buttons'</code></li>
                        <li><code>radio_layout</code> - Layout para radio default: <code>'vertical'</code> (padrão) ou
                            <code>'horizontal'</code></li>
                        <li><code>radio_icons</code> - Dict com ícones Bootstrap para radio buttons:
                            <code>{'valor': 'bi-icon'}</code></li>
                    </ul>

                    <p class="mb-2 mt-3"><strong>Checkbox:</strong></p>
                    <ul>
                        <li><code>checkbox_style</code> - Estilo do checkbox: <code>'default'</code> ou
                            <code>'switch'</code></li>
                    </ul>

                    <p class="mb-2 mt-3"><strong>Máscaras de digitação:</strong></p>
                    <ul>
                        <li><code>mask</code> - Padrão da máscara (ex: <code>'000.000.000-00'</code>)</li>
                        <li><code>unmask</code> - Se true, envia valor sem formatação (padrão: false)</li>
                    </ul>

                    <p class="mb-2 mt-3"><strong>Campos decimais (type='decimal'):</strong></p>
                    <ul>
                        <li><code>decimal_places</code> - Número de casas decimais (padrão: 2)</li>
                        <li><code>show_thousands</code> - Exibir separador de milhares (padrão: true)</li>
                        <li><code>allow_negative</code> - Permitir valores negativos (padrão: false)</li>
                        <li><code>decimal_prefix</code> - Prefixo (ex: <code>'R$ '</code>)</li>
                        <li><code>decimal_suffix</code> - Sufixo (ex: <code>' kg'</code>, <code>' %'</code>)</li>
                    </ul>

                    <p class="mb-2 mt-3"><strong>Eventos JavaScript:</strong></p>
                    <ul>
                        <li><code>oninput, onchange, onblur, onfocus, onkeyup, onkeydown, onpaste</code> - Eventos
                            JavaScript</li>
                    </ul>

                    <p class="mb-2 mt-3"><strong>Outros:</strong></p>
                    <ul>
                        <li><code>attributes</code> - Dict com atributos HTML extras (minlength, maxlength, pattern,
                            data-*, etc.)</li>
                        <li><code>append_icon</code> - Ícone Bootstrap para botão anexado (ex: <code>'bi-eye'</code>)
                        </li>
                        <li><code>help_text</code> - Texto de ajuda abaixo do campo</li>
                        <li><code>class_extra</code> - Classes CSS adicionais</li>
                        <li><code>wrapper_class</code> - Classes para o wrapper do campo</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}